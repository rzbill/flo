import{k as f,V as p,Y as N,r as v,j as e,B as m,Z as o,C as r,a as i,b as n,_ as u,d as a,F as b}from"./index-Dl3YmGhg.js";import{C as y}from"./clock-zV5i9vLz.js";import{U as w}from"./users-DqUlc2N1.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],q=f("circle-x",_);function E({namespace:h,workqueue:j,onShowEnqueueModal:c}){const{formatNumber:s}=p(),{data:t,isLoading:g,error:x}=N(h,j),d=v.useMemo(()=>({totalEnqueued:t?.total_enqueued||0,totalCompleted:t?.total_completed||0,totalFailed:t?.total_failed||0,pending:t?.pending_count||0,inFlight:t?.in_flight_count||0,retry:t?.retry_count||0,dlq:t?.dlq_count||0,groups:t?.groups||[],successRate:t?.total_enqueued?(t.total_completed/t.total_enqueued*100).toFixed(1):"0.0"}),[t]);return g?e.jsx("div",{className:"p-6 space-y-4",children:e.jsx("div",{className:"animate-pulse space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(l=>e.jsx("div",{className:"h-32 bg-muted rounded-lg"},l))})})}):x?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 p-6",children:[e.jsx("h3",{className:"font-semibold text-destructive mb-2",children:"Error Loading Stats"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x.message||"Failed to load workqueue statistics"})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Overview"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"WorkQueue metrics and statistics"})]}),e.jsxs(m,{onClick:c,children:[e.jsx(o,{className:"h-4 w-4 mr-2"}),"Enqueue Message"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(r,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Pending"}),e.jsx(u,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(a,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s(d.pending)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ready to dequeue"})]})]}),e.jsxs(r,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"In-Flight"}),e.jsx(y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(a,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s(d.inFlight)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently processing"})]})]}),e.jsxs(r,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Retry Queue"}),e.jsx(b,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(a,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s(d.retry)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting retry"})]})]}),e.jsxs(r,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Dead Letter Queue"}),e.jsx(q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(a,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s(d.dlq)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Failed permanently"})]})]})]}),e.jsxs(r,{children:[e.jsx(i,{children:e.jsx(n,{children:"Lifetime Statistics"})}),e.jsx(a,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Total Enqueued"}),e.jsx("div",{className:"text-2xl font-semibold",children:s(d.totalEnqueued)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Total Completed"}),e.jsx("div",{className:"text-2xl font-semibold text-green-600",children:s(d.totalCompleted)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Total Failed"}),e.jsx("div",{className:"text-2xl font-semibold text-red-600",children:s(d.totalFailed)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Success Rate"}),e.jsxs("div",{className:"text-2xl font-semibold",children:[d.successRate,"%"]})]})]})})]}),d.groups.length>0&&e.jsxs(r,{children:[e.jsx(i,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"Consumer Groups"]})}),e.jsx(a,{children:e.jsx("div",{className:"space-y-4",children:d.groups.map(l=>e.jsx("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:l.group}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[e.jsxs("span",{children:[s(l.consumer_count)," consumers"]}),e.jsx("span",{children:"路"}),e.jsxs("span",{children:[s(l.pending_count)," pending"]}),e.jsx("span",{children:"路"}),e.jsxs("span",{children:[s(l.in_flight_count)," in-flight"]}),l.retry_count>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"路"}),e.jsxs("span",{className:"text-orange-600",children:[s(l.retry_count)," retry"]})]}),l.dlq_count>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"路"}),e.jsxs("span",{className:"text-red-600",children:[s(l.dlq_count)," DLQ"]})]})]})]})},l.group))})})]}),d.totalEnqueued===0&&e.jsx(r,{children:e.jsx(a,{className:"pt-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(u,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Messages Yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Start by enqueuing your first message to this workqueue."}),e.jsxs(m,{onClick:c,children:[e.jsx(o,{className:"h-4 w-4 mr-2"}),"Enqueue Message"]})]})})})]})}export{E as default};
