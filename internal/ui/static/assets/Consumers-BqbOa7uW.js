import{k as I,r as c,V as L,$ as D,a4 as E,j as e,S as F,s as T,t as M,u as U,v as V,a3 as A,I as G,C as j,d as p,a as $,b as O,J as N,a5 as R}from"./index-Dl3YmGhg.js";import{U as B}from"./users-DqUlc2N1.js";import{C as H}from"./clock-zV5i9vLz.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],f=I("circle-user",J);function z({namespace:d,workqueue:m}){const[i,g]=c.useState("default"),[a,v]=c.useState(""),{formatNumber:o,formatRelativeTime:b}=L(),{data:n}=D(d,m),y=c.useMemo(()=>n?.groups?n.groups:["default"],[n]),{data:l,isLoading:C,error:x}=E(d,m,i),t=c.useMemo(()=>{if(!l?.consumers)return[];if(!a)return l.consumers;const s=a.toLowerCase();return l.consumers.filter(r=>r.consumer_id.toLowerCase().includes(s))},[l,a]),w=c.useMemo(()=>t.filter(s=>s.is_alive).length,[t]);return C?e.jsx("div",{className:"p-6 space-y-4",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-12 bg-muted rounded"}),e.jsx("div",{className:"h-64 bg-muted rounded"})]})}):x?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 p-6",children:[e.jsx("h3",{className:"font-semibold text-destructive mb-2",children:"Error Loading Consumers"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x.message||"Failed to load consumer information"})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5"}),"Consumers"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[w," of ",t.length," consumers active"]})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"shrink-0",children:e.jsxs(F,{value:i,onValueChange:g,children:[e.jsx(T,{className:"w-[180px] h-8 hover:bg-input-background active:bg-input data-[state=open]:bg-input",children:e.jsxs("span",{className:"flex items-center gap-1 text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"group"}),e.jsx("span",{className:"inline-block w-1","aria-hidden":!0}),e.jsx(M,{})]})}),e.jsx(U,{children:y.map(s=>e.jsx(V,{value:s,className:"text-xs",children:s},s))})]})}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx(A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(G,{placeholder:"Search by consumer ID...",value:a,onChange:s=>v(s.target.value),className:"pl-9"})]})]}),t.length===0?e.jsx(j,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(f,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Consumers Found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a?"No consumers match your search criteria.":`No active consumers in group "${i}".`})]})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(s=>{const r=s.is_alive,S=new Date(s.expires_at_ms),_=Date.now(),u=S.getTime()-_;return e.jsxs(j,{className:"relative",children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs(O,{className:"text-base flex items-center gap-2 truncate",children:[e.jsx(f,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.consumer_id})]})}),e.jsx(N,{variant:r?"default":"secondary",className:"flex-shrink-0 ml-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-3 w-3 mr-1"}),"Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"h-3 w-3 mr-1"}),"Inactive"]})})]})}),e.jsxs(p,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground mb-1",children:"Capacity"}),e.jsx("div",{className:"font-semibold",children:o(s.capacity)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground mb-1",children:"In-Flight"}),e.jsx("div",{className:"font-semibold",children:o(s.in_flight)})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Seen"}),e.jsx("span",{className:"font-medium",children:b(s.last_seen_ms)})]}),r&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Expires In"}),e.jsx("span",{className:"font-medium",children:u>0?`${Math.floor(u/1e3)}s`:"Expired"})]})]}),s.labels&&Object.keys(s.labels).length>0&&e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Labels"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(s.labels).map(([h,k])=>e.jsxs(N,{variant:"outline",className:"text-xs",children:[h,": ",k]},h))})]})]})]},s.consumer_id)})})]})}export{z as default};
